<!--
     It's default Template to render the metaforms.
     It as a `Fixed layout` and `Dynamic layout` sections.
     FixedLayouts are
        1. App Icon
        2. Name
        3. Description
        4. Keywords
    These fixed layout fields are configurable
    DynamicLayout Support any kind of input Types

-->

<script type="text/ng-template" ng-app="org.ekstep.metadataform" ng-controller="metadataform as $ctrl" id="metadataTemplate">
    <div class="ui modal active" id="meta-modal">
        <div class="header">
            <div class="ui two column grid">
                <div class="row">
                    <div class="column">
                        <span><i class="icon edit"></i> Edit Details</span>
                    </div>
                    <div class="right aligned column">
                        <i class="close link icon" ng-click="$ctrl.close()"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="content">
            <form class="ui form" id="content-meta-form" novalidate name="metaForm" ng-init="initDropdown()">
                <div class="ui grid">
                    <div class="row">
                        <div class="two wide field">
                            <div class="field" ng-class=" {'error': $ctrl.submitted && !($ctrl.contentMeta.appIcon)}">
                                <label><i class="camera icon "></i></label>
                                <div id="field-app-icon" class="app-icon content-icon " ng-class="{ 'required-error': $ctrl.submitted && !($ctrl.contentMeta.appIcon)} " ng-mouseenter="$ctrl.appIconHover=true" ng-mouseleave="$ctrl.appIconHover=false " ng-click="$ctrl.launchImageBrowser()">
                                    <div class="app-icon-overlay">
                                        <p class="app-icon-overlay-message "></p>
                                    </div>
                                    <img ng-src="{{$ctrl.contentMeta.appIcon || $ctrl.defaultImage }}" />
                                </div>
                            </div>
                        </div>
                        <div class="ten wide field">
                            <div ng-repeat="fixedField in fixedLayoutConfigurations">
                                <div class="field" ng-show="(fixedField.code =='name' && fixedField.renderingHints.visible)" ng-class="{ 'error': ($ctrl.submitted && metaForm.name.$error.required)}">
                                    <label>{{fixedField.label}}</label>
                                    <div class="ui input ">
                                        <input id="ecm-name " placeholder={{field.placeholder}} ng-model="$ctrl.contentMeta.name " name="name " type="text" maxlength="100" ng-required="{{fixedField.required}}">
                                    </div>
                                </div>
                                <div class="field" ng-show="(fixedField.code =='description' && fixedField.renderingHints.visible)" ng-class=" " ng-required="{{fixedField.required}}">
                                    <label>{{fixedField.label}}</label>
                                    <div class=" ui input ">
                                        <textarea id="ecm-description " placeholder={{field.placeholde}} ng-model="$ctrl.contentMeta.description " name="description " rows="2 " required ng-click="generateTelemetry({type: 'click', subtype:
                                                'input', target: 'description'}) "></textarea>
                                    </div>
                                </div>
                                <div class="field" ng-show="(fixedField.code =='keyword' && fixedField.renderingHints.visible)" ng-class='' ng-required="{{fixedField.required}}">
                                    <keywords></keywords>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="two wide field">
                        </div>
                        <div class="ten wide field">
                            <div class="ui grid">
                                <div class="six wide field" ng-repeat="dynamicField in dynamicLayoutConfigurations">
                                    <div class="field" ng-if="dynamicField.inputType=='text' || dynamicField.inputType=='number'" ng-required=" {{dynamicField.required}} ">
                                        <label>{{dynamicField.label}}</label>
                                        <div class=" ui input ">
                                            <input id="ecm-name " placeholder={{dynamicField.placeholder}} name="name " type="{{dynamicField.inputType}} " maxlength="100 " ng-required="{{dynamicField.required}} ">
                                        </div>
                                    </div>
                                    <div class="field " ng-if="dynamicField.inputType=='select' && dynamicField.code!='year' " ng-required="{{dynamicField.required}} ">
                                        <label>{{dynamicField.label}}</label>
                                        <select id={{dynamicField.code}} name={{dynamicField.code}} class="ui search dropdown placeholder-padding contentmeta-category-1 " ng-model="$ctrl.contentMeta[dynamicField.code]" ng-change="ecEditor.dispatchEvent('editor:form:change', {field:dynamicField,value:$ctrl.contentMeta[dynamicField.code]}) ">
                                            <option value=" ">Select</option>
                                            <option data-value="{{category.name}} " ng-repeat="category in dynamicField.range ">{{category.name}}</option>
                                        </select>
                                    </div>
                                    <div class="field " ng-if="dynamicField.inputType=='concetpselector' " ng-required=" {{dynamicField.required}}">
                                        <label>{{dynamicField.label}}</label>
                                        <concetpselector></concetpselector>
                                    </div>
                                    <div class=" field " ng-if="dynamicField.code=='year' " ng-required=" {{dynamicField.required}} ">
                                        <label>{{dynamicField.label}}</label>
                                        <year config="dynamicField ">
                                        </year>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <div class=" actions ">
            <div class="twelve wide column right aligned ">
                <div class="ui buttons ">
                    <button id="closePopUp " class="ui orange button " type="button " ng-click="ecEditor.dispatchEvent( 'editor:form:cancel') ">Cancel</button>
                    <div class="or "></div>
                    <button class="ui blue button " type="button " ng-click="ecEditor.dispatchEvent( 'editor:form:success', metaForm.$valid) ">Save</button>
                </div>
            </div>
        </div>
    </div>
</script>