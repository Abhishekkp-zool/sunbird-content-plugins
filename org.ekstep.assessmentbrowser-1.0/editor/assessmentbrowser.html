<style type="text/css">
.filters-container {
    padding: 8px 10px 4px 18px;
    background: #f1f1f1;
}
.itemIframeMessages {
    border: 2px solid #E4E4E4;
    padding: 110px 20px;
    background: #FFFFFF;
    text-align: center;
    font-weight: bold;
    height: 270px;
    width: 480px;
}
.grid .items .item:hover{
    background: #f1f1f1;   
}
</style>
<div class="ui modal large">
    <div class="content">
        <div class="ui mini three steps">
            <div class="{{$ctrl.isFiltersShown ? 'active': ''}} step">
                <i class="truck icon"></i>
                <div class="content">
                    <div class="title">Pick Questions</div>
                    <div class="description">Search and select questions</div>
                </div>
            </div>
            <div class="{{!$ctrl.isFiltersShown ? 'active': ''}} step">
                <i class="payment icon"></i>
                <div class="content">
                    <div class="title">Configure Assessment</div>
                    <div class="description">Enter assessment title and configure defaults</div>
                </div>
            </div>
            <div class="step">
                <i class="payment icon"></i>
                <div class="content">
                    <div class="title">Add Assessment</div>
                    <div class="description">Add assessment to the content</div>
                </div>
            </div>
        </div>
        <div ng-show="$ctrl.isFiltersShown" class="filters-container">
            <div class="ui form">
                <div class="field">
                    <div class="ui fluid icon input">
                        <input ng-disabled="isFilterAdded()" ng-model="$ctrl.activity.question_title" placeholder="Search by question, or question title" type="text"></input>
                        <i class="inverted circular search link icon" ng-click="($ctrl.isMyQuestions === true ? $ctrl.searchQuestions('myQuestions') : $ctrl.searchQuestions())"></i>
                    </div>
                </div>
                <div class="ui accordion field" id="assessmentAdvancedFields">
                    <div class="title" ng-click="$ctrl.showAdvancedFilter = !$ctrl.showAdvancedFilter">
                        <i class="dropdown icon" ng-if="!$ctrl.showAdvancedFilter"></i>
                        <i class="dropdown icon" ng-if="$ctrl.showAdvancedFilter" style="transform: rotate(90deg);"></i> Advanced Filters
                    </div>
                    <div class="content transition {{$ctrl.showAdvancedFilter ? 'visible': 'hidden'}}">
                        <div class="three fields">
                            <div class="field">
                                <div class="ui fluid labeled input">
                                    <div class="ui label">Language</div>
                                    <select class="ui fluid dropdown search" ng-model="$ctrl.activity.language" ng-options="lang for lang in $ctrl.assessment.language" ng-change="($ctrl.isMyQuestions === true ? $ctrl.searchQuestions('myQuestions') : $ctrl.searchQuestions())">
                                        <option value="">
                                            All
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui fluid labeled input">
                                    <div class="ui label">Difficulty</div>
                                    <select class="ui fluid dropdown search" ng-model="$ctrl.activity.qlevel" ng-options="level for level in $ctrl.assessment.qlevel" ng-change="($ctrl.isMyQuestions === true ? $ctrl.searchQuestions('myQuestions') : $ctrl.searchQuestions())">
                                        <option value="">
                                            Difficulty
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui fluid labeled input">
                                    <div class="ui label">Question Type</div>
                                    <select multiple="" class="ui fluid dropdown search" ng-model="$ctrl.activity.type" ng-options="type for type in $ctrl.assessment.type" ng-change="($ctrl.isMyQuestions === true ? $ctrl.searchQuestions('myQuestions') : $ctrl.searchQuestions())">
                                        <option value="">
                                            Type
                                        </option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="three fields">
                            <div class="field">
                                <div class="ui fluid labeled input">
                                    <div class="ui label">&emsp;Grade&nbsp;&nbsp;&nbsp;</div>
                                    <select multiple="" class="ui fluid dropdown search" ng-model="$ctrl.activity.gradeLevel" ng-options="grade for grade in $ctrl.assessment.gradeLevel" data-bind="options:assessment.gradeLevel" ng-change="($ctrl.isMyQuestions === true ? $ctrl.searchQuestions('myQuestions') : $ctrl.searchQuestions())">
                                        <option value="">
                                            Grade
                                        </option>
                                    </select>
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui fluid labeled input">
                                    <div class="ui label">Concepts</div>
                                    <input type="text" placeholder="Concepts" class="fluid">
                                </div>
                            </div>
                            <div class="field">
                                <div class="ui toggle checkbox">
                                    <input type="checkbox" ng-model="$ctrl.activityOptions.myQuestions" ng-change="$ctrl.searchQuestions($ctrl.activityOptions.myQuestions ? 'myQuestions' : '')">
                                    <label>My Questions</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div ng-show="!$ctrl.isFiltersShown" class="filters-container">
            <div class="ui form">
                <div class="five fields">
                    <div class="field">
                        <div class="ui corner labeled input">
                            <input name="title" ng-model="activityOptions.title" type="text" placeholder="Assessment Title" autocomplete="off">
                            <div class="ui corner label">
                                <i class="asterisk icon"></i>
                            </div>
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui fluid labeled input">
                            <div class="ui label">Total Marks</div>
                            <input class="total-marks ui dropdown" id="max_score" name="max_score" ng-model="$ctrl.activityOptions.max_score" required="" type="number" />
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui fluid labeled input displayCount">
                            <div class="ui label">Display</div>
                            <select class="ui fluid dropdown" id="total_items" ng-model="$ctrl.activityOptions.total_items" ng-options="option as option for option in $ctrl.activityOptions.range">
                            </select>
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui toggle checkbox">
                            <input type="checkbox" ng-model="$ctrl.activityOptions.showImmediateFeedback">
                            <label>Show Immediate Feedback</label>
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui toggle checkbox">
                            <input type="checkbox" ng-model="$ctrl.activityOptions.shuffle">
                            <label>Shuffle Questions</label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="ui divider"></div>
        <div ng-show="($ctrl.isFiltersShown && $ctrl.items.length) || (!$ctrl.isFiltersShown && $ctrl.cart.items.length)">
            <div class="ui two column horizontally padded grid">
                <div class="column" style="width: 480px;height: 284px; overflow-y: scroll;">
                    <div class="ui large divided items" ng-show="$ctrl.isFiltersShown">
                        <div class="item select" ng-repeat="item in $ctrl.items" ng-click=" item.isSelected ? $ctrl.cart.remove(item) : $ctrl.cart.add(item); $event.stopPropagation()">
                            <div class="middle aligned content">
                                <div class="header">{{ item.question.question }}</div>
                                <div class="meta">{{item.question.type}} | {{ item.question.qlevel}} | {{ item.question.title }}</div>
                                <div class="description">{{ item.question.description }}</div>
                            </div>
                            <div class="ui checkbox" ng-class="item.isSelected ? 'checked' : '' ">
                                <input type="checkbox" ng-checked="item.isSelected ? 'checked' : ''" name="check">
                                <label></label>
                            </div>
                        </div>
                    </div>
                    <div class="ui large divided items" ng-show="!$ctrl.isFiltersShown">
                        <div class="item select" ng-repeat="cartItem in $ctrl.cart.items" ng-click="$ctrl.cart.remove(cartItem)">
                            <div class="middle aligned content">
                                <div class="header">{{ cartItem.question.question }}</div>
                                <div class="meta">{{cartItem.question.type}} | {{ cartItem.question.qlevel}} | {{ cartItem.question.title }}</div>
                                <div class="description">{{ cartItem.question.description }}</div>
                            </div>
                            <div class="ui checkbox" ng-class="item.isSelected ? 'checked' : '' ">
                                <input type="checkbox" checked="" name="check">
                                <label></label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column right floated">
                    <iframe id="itemIframe" ng-hide="!$ctrl.itemPreviewLoading && ($ctrl.itemPreviewContent.error || ($ctrl.itemPreviewDisplay == $ctrl.itemPreviewDefaultMessage))" style="width: 480px;height: 270px; border: 2px solid #E4E4E4;"></iframe>
                    <div class="itemIframeMessages" ng-show="!$ctrl.itemPreviewLoading && ($ctrl.itemPreviewContent.error || ($ctrl.itemPreviewDisplay == $ctrl.itemPreviewDefaultMessage))">{{$ctrl.itemPreviewDisplay}}</div>
                </div>
            </div>
        </div>
        <div class="ui center aligned segment" ng-show="($ctrl.items && !$ctrl.items.length) && $ctrl.isFiltersShown">
            No Data Found
            <br> Redefine your search filters!
        </div>
    </div>
    <div class="actions">
        <a href="" target="_blank">
            <button class="ui blue left floated button">Create A Question</button>
        </a>
        <div class="ui buttons" ng-if="$ctrl.isFiltersShown">
            <button class="ui orange button" ng-click="$ctrl.cancel()" type="button">Cancel</button>
            <div class="or"></div>
            <button class="ui blue button" ng-click="$ctrl.addActivityOptions()" ng-disabled="!$ctrl.cart.items.length" type="button">NEXT</button>
        </div>
        <div class="ui buttons" ng-if="!$ctrl.isFiltersShown">
            <button id="closePopUp" class="ui orange button" ng-click="$ctrl.isFiltersShown = !$ctrl.isFiltersShown" type="button">Add More Questions</button>
            <div class="or"></div>
            <button id="selectanduse" class="ui blue button" ng-click="$ctrl.addItemActivity()" ng-disabled="activityOptionsForm.$invalid || !activityOptions.title || !$ctrl.cart.items.length" type="button">Add Assessment</button>
        </div>
    </div>
</div>
